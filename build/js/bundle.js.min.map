{"version":3,"sources":["agregarEliminarServicio.js","app.js","cambiarSeccion.js","formulario.js","mostrarResumen.js","mostrarSeccion.js","mostrarServicios.js"],"names":["agregarServicio","servicio","servicios","cita","eliminarServicio","id","filter","pagina","nombre","fecha","hora","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","mostrarPaginaSiguiente","mostrarPaginaAnterior","mostrarBotonesPaginacion","mostrarResumen","almacenarNombreCita","almacenarFechaCita","deshabilitarFechaAnterior","almacenarHoraCita","document","querySelectorAll","forEach","tab","addEventListener","e","parseInt","target","dataset","paso","getElementById","paginaAnterior","paginaSiguiente","classList","add","remove","nombreTexto","value","trim","length","mostrarAlerta","alerta","querySelector","fechaInput","dia","Date","getUTCDay","includes","horaInput","horaCita","split","setTimeout","mensaje","tipo","createElement","textContent","appendChild","fechaActual","year","getFullYear","mes","getMonth","fechaDeshabilitada","getDate","min","resumen","innerHTML","Object","values","sinCita","append","serviciosCita","servicioHeading","totalPagar","precio","contenedorServicio","nombreServicio","precioServicio","totalServicio","nombreCita","fechaCita","cantidadPagar","seccionAnterior","tabAnterior","async","respuesta","fetch","db","json","servicioDiv","idServicio","onclick","seleccionarServicio","error","console","elemento","tagName","parentElement","contains","firstElementChild","nextElementSibling"],"mappings":"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","file":"bundle.js","sourcesContent":["// toma el servicio que quiero añadir\r\nfunction agregarServicio(servicio) {\r\n  const { servicios } = cita\r\n\r\n  // tomo una copia de los servicios del objeto cita para no mutarlo\r\n  cita.servicios = [...servicios, servicio]\r\n}\r\n\r\n// toma un id del servicio que quiero eliminar\r\nfunction eliminarServicio(id) {\r\n  const { servicios } = cita\r\n\r\n  cita.servicios = servicios.filter(servicio => (\r\n    servicio.id !== id\r\n  ))\r\n}","let pagina = 1\r\nconst cita = {\r\n  nombre: \"\",\r\n  fecha: \"\",\r\n  hora: \"\",\r\n  servicios: []\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  iniciarApp()\r\n})\r\n\r\nfunction iniciarApp() {\r\n\r\n  mostrarServicios()\r\n\r\n  // resalta el div actual segun el tab al que se presiona\r\n  mostrarSeccion()\r\n\r\n  // oculta o muestra la seccion segun el tab al que se presiona\r\n  cambiarSeccion()\r\n\r\n  // pagina siguiente\r\n  mostrarPaginaSiguiente()\r\n\r\n  // pagina anterior\r\n  mostrarPaginaAnterior()\r\n\r\n  // comprueba la pagina para mostrar u ocultar la paginacion\r\n  mostrarBotonesPaginacion()\r\n\r\n  // Muestra el resumen de la cita (o un mensaje de error en caso de no pasar la validacion)\r\n  mostrarResumen()\r\n\r\n  almacenarNombreCita()\r\n\r\n  almacenarFechaCita()\r\n\r\n  deshabilitarFechaAnterior()\r\n\r\n  almacenarHoraCita()\r\n}","function cambiarSeccion() {\r\n  const tabs = document.querySelectorAll(\".tabs button\")\r\n\r\n  tabs.forEach(tab => {\r\n    tab.addEventListener(\"click\", e => {\r\n      // cambio el numero de la pagina\r\n      pagina = parseInt(e.target.dataset.paso)\r\n\r\n      // llamar a la funcion mostrarSeccion\r\n      mostrarSeccion()\r\n      mostrarBotonesPaginacion()\r\n    })\r\n  });\r\n}\r\n\r\nfunction mostrarPaginaSiguiente() {\r\n  const paginaSiguiente = document.getElementById(\"siguiente\")\r\n  paginaSiguiente.addEventListener(\"click\", () => {\r\n    pagina++;\r\n    mostrarBotonesPaginacion()\r\n  })\r\n}\r\n\r\nfunction mostrarPaginaAnterior() {\r\n  const paginaAnterior = document.getElementById(\"anterior\")\r\n  paginaAnterior.addEventListener(\"click\", () => {\r\n    pagina--;\r\n    mostrarBotonesPaginacion()\r\n  })\r\n}\r\n\r\nfunction mostrarBotonesPaginacion() {\r\n  const paginaAnterior = document.getElementById(\"anterior\")\r\n  const paginaSiguiente = document.getElementById(\"siguiente\")\r\n\r\n  if (pagina === 1) {\r\n    paginaAnterior.classList.add(\"ocultar\")\r\n  } else if (pagina === 3) {\r\n    paginaSiguiente.classList.add(\"ocultar\")\r\n    paginaAnterior.classList.remove(\"ocultar\")\r\n    mostrarResumen() // estoy en la pagina 3, carga el resumen de la cita\r\n\r\n  } else {\r\n    paginaAnterior.classList.remove(\"ocultar\")\r\n    paginaSiguiente.classList.remove(\"ocultar\")\r\n  }\r\n  mostrarSeccion() // cambia la seccion que se muestra por la de la pagina\r\n}","function almacenarNombreCita() {\r\n  const nombreInput = document.getElementById(\"nombre\")\r\n\r\n  nombreInput.addEventListener(\"input\", e => {\r\n    // trim() elimina los espacios al principio y al final\r\n    const nombreTexto = e.target.value.trim()\r\n\r\n    if (nombreTexto === \"\" || nombreTexto.length <= 3) {\r\n      mostrarAlerta(\"Nombre no válido\", \"error\")\r\n    } else {\r\n      const alerta = document.querySelector(\".alerta\")\r\n      if (alerta) {\r\n        alerta.remove()\r\n      }\r\n      cita.nombre = nombreTexto\r\n    }\r\n  })\r\n}\r\n\r\nfunction almacenarFechaCita() {\r\n  const fechaInput = document.getElementById(\"fecha\")\r\n\r\n  fechaInput.addEventListener(\"input\", e => {\r\n    // retorna un numero que representa el dia siendo domingo el 0 y sabado el 6\r\n    const dia = new Date(e.target.value).getUTCDay()\r\n\r\n    if ([0, 6].includes(dia)) {\r\n      fechaInput.value = \"\"\r\n      mostrarAlerta(\"No se aceptan citas los Fines de Semana\", \"error\")\r\n    } else {\r\n      cita.fecha = fechaInput.value\r\n    }\r\n  })\r\n}\r\n\r\nfunction almacenarHoraCita() {\r\n  const horaInput = document.getElementById(\"hora\")\r\n  horaInput.addEventListener(\"change\", e => {\r\n    const horaCita = e.target.value\r\n    const hora = horaCita.split(\":\")\r\n\r\n    if (hora[0] < 10 || (hora[0] >= 22 && hora[1] > 0) ) {\r\n      setTimeout(() => {\r\n        horaInput.value = \"\"\r\n      }, 1000);\r\n      mostrarAlerta(\"Ya no se aceptan citan\", \"error\")\r\n    } else {\r\n      cita.hora = horaCita\r\n    }\r\n  })\r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo) {\r\n\r\n  // si hay una alerta previa, entonces no crear otra\r\n  const alertaPrevia = document.querySelector(\".alerta\")\r\n  if (alertaPrevia) {\r\n    return\r\n  }\r\n\r\n  const alerta = document.createElement(\"DIV\")\r\n  alerta.classList.add(\"alerta\")\r\n  alerta.textContent = mensaje\r\n\r\n  if (tipo === \"error\") {\r\n    alerta.classList.add(\"error\")\r\n  }\r\n\r\n  // inserto la alerta en el HTML\r\n  const formulario = document.querySelector(\".formulario\")\r\n  formulario.appendChild(alerta)\r\n\r\n  // elimino la alerta despues de 3 segundos\r\n  setTimeout(() => {\r\n    alerta.remove()\r\n  }, 3000);\r\n}\r\n\r\nfunction deshabilitarFechaAnterior() {\r\n  const fechaInput = document.getElementById(\"fecha\")\r\n  const fechaActual = new Date()\r\n  const year = fechaActual.getFullYear()\r\n  let mes = fechaActual.getMonth() + 1 // +1 porque esto es un array asi que su indice comienza desde 0\r\n\r\n  if (mes < 10) {\r\n    mes = \"0\" + mes\r\n  }\r\n\r\n  const dia = fechaActual.getDate() + 1\r\n  // formato deseado: aaaa-mm-dd\r\n  const fechaDeshabilitada = `${year}-${mes}-${dia}`\r\n\r\n  fechaInput.min = fechaDeshabilitada\r\n}\r\n","function mostrarResumen() {\r\n  // destructuring\r\n  const { nombre, fecha, servicios, hora } = cita\r\n  const resumen = document.querySelector(\".contenido-resumen\")\r\n\r\n  // limpio el html previo\r\n  resumen.innerHTML = \"\"\r\n\r\n  // validacion de objeto\r\n  if (Object.values(cita).includes(\"\")) {\r\n    const sinCita = document.createElement(\"P\")\r\n    sinCita.textContent = \"Faltan servicios, fecha, hora o nombre\"\r\n    sinCita.classList.add(\"invalidar-cita\")\r\n    resumen.append(sinCita)\r\n\r\n    return\r\n  }\r\n\r\n  const serviciosCita = document.createElement(\"DIV\")\r\n  serviciosCita.classList.add(\"resumen-servicios\")\r\n\r\n  const servicioHeading = document.createElement(\"H3\")\r\n  servicioHeading.textContent = \"Resumen de los servicios\"\r\n\r\n  serviciosCita.append(servicioHeading)\r\n\r\n  let totalPagar = 0\r\n\r\n  servicios.forEach(servicio => {\r\n\r\n    const { nombre, precio } = servicio\r\n    const contenedorServicio = document.createElement(\"DIV\")\r\n    contenedorServicio.classList.add(\"contenedor-servicio\")\r\n\r\n    const nombreServicio = document.createElement(\"P\")\r\n    nombreServicio.classList.add(\"nombre-servicio\")\r\n    nombreServicio.textContent = nombre\r\n\r\n    const precioServicio = document.createElement(\"P\")\r\n    precioServicio.classList.add(\"precio-servicio\")\r\n    precioServicio.textContent = precio\r\n\r\n    const totalServicio = precio.split(\"$\")\r\n    totalPagar += parseInt(totalServicio[1]);\r\n\r\n    contenedorServicio.append(nombreServicio, precioServicio)\r\n    serviciosCita.appendChild(contenedorServicio)\r\n  });\r\n  \r\n  const nombreCita = document.createElement(\"P\")\r\n  nombreCita.innerHTML = `<span>Nombre: </span>${nombre}`\r\n  \r\n  const fechaCita = document.createElement(\"P\")\r\n  fechaCita.innerHTML = `<span>Fecha: </span>${fecha}`\r\n  \r\n  const horaCita = document.createElement(\"P\")\r\n  horaCita.innerHTML = `<span>Hora: </span>${hora}`\r\n  \r\n  const cantidadPagar = document.createElement(\"P\")\r\n  cantidadPagar.classList.add(\"total\")\r\n  cantidadPagar.innerHTML = `<span>Total a pagar: $</span>${totalPagar}`\r\n\r\n  resumen.append(nombreCita, fechaCita, horaCita, serviciosCita, cantidadPagar)\r\n}","function mostrarSeccion() {\r\n\r\n  // eliminar la seccion anterior\r\n  const seccionAnterior = document.querySelector(\".mostrar-seccion\")\r\n  if (seccionAnterior) {\r\n    seccionAnterior.classList.remove(\"mostrar-seccion\")\r\n  }\r\n\r\n  const seccion = document.getElementById(`paso-${pagina}`)\r\n  seccion.classList.add(\"mostrar-seccion\")\r\n\r\n  // elimina la clase .actual del tab anterior\r\n  const tabAnterior = document.querySelector(\".tabs button.actual\")\r\n  if (tabAnterior) {\r\n    tabAnterior.classList.remove(\"actual\")\r\n  }\r\n\r\n  // resalta el tab actual\r\n  const tab = document.querySelector(`[data-paso=\"${pagina}\"]`)\r\n  tab.classList.add(\"actual\")\r\n}","async function mostrarServicios() {\r\n\r\n  try {\r\n    const respuesta = await fetch(\"./servicios.json\")\r\n    const db = await respuesta.json()\r\n\r\n    const { servicios } = db\r\n\r\n    // generar html\r\n    servicios.forEach(servicio => {\r\n      const { id, nombre, precio } = servicio\r\n\r\n      // dom scripting\r\n      const nombreServicio = document.createElement(\"P\")\r\n      nombreServicio.textContent = nombre\r\n      nombreServicio.classList.add(\"nombre-sevicio\")\r\n\r\n      const precioServicio = document.createElement(\"P\")\r\n      precioServicio.textContent = `$${precio}`\r\n      precioServicio.classList.add(\"precio-sevicio\")\r\n\r\n      const servicioDiv = document.createElement(\"DIV\")\r\n      servicioDiv.append(nombreServicio, precioServicio)\r\n      servicioDiv.classList.add(\"servicio\")\r\n      servicioDiv.dataset.idServicio = id\r\n\r\n      // seleccionar los servicios\r\n      servicioDiv.onclick = seleccionarServicio\r\n\r\n      // agrego mi div al html\r\n      const listadoServicios = document.querySelector(\".listado-servicios\")\r\n      listadoServicios.appendChild(servicioDiv)\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\n\r\nfunction seleccionarServicio(e) {\r\n\r\n  let elemento\r\n\r\n  // forzar que el elemento al cual le de click sea un div\r\n  if (e.target.tagName === \"P\") {\r\n    elemento = e.target.parentElement\r\n  } else {\r\n    elemento = e.target\r\n  }\r\n\r\n\r\n\r\n  if (elemento.classList.contains(\"seleccionado\")) {\r\n    elemento.classList.remove(\"seleccionado\")\r\n\r\n    const id = parseInt(elemento.dataset.idServicio)\r\n\r\n    eliminarServicio(id)\r\n    \r\n  } else {\r\n    elemento.classList.add(\"seleccionado\")\r\n\r\n    const objServicio = {\r\n      id: parseInt(elemento.dataset.idServicio),\r\n      nombre: elemento.firstElementChild.textContent, // retorna el primer hijo\r\n      precio: elemento.firstElementChild.nextElementSibling.textContent // retorna el hermano del primer hijo\r\n    }\r\n\r\n    agregarServicio(objServicio)\r\n  }\r\n}"]}